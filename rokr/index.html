<!DOCTYPE html>
<html>
    <head>
        <title>ROKR - RAiD OKR Management Platform</title>
        <link rel="stylesheet" href="https://raw.githubusercontent.com/chrischow/project-ace/main/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://raw.githubusercontent.com/chrischow/project-ace/main/css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" href="styles.css">

        <!-- Load utils -->
        <script type="text/javascript">
            function loadWords(filename, asynch) {
                // Retrieve text
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var sTag = document.createElement('script');
                        sTag.type = 'text/javascript';
                        sTag.innerHTML = this.responseText;
                        var head = document.getElementsByTagName('head')[0];
                        head.appendChild(sTag);
                    }
                }
                var url = 'https://raw.githubusercontent.com/chrischow/project-ace/main/txt/' + filename + '.txt';
                xhr.open('GET', url, asynch);
                xhr.send();
            };

            function loadComponent(component) {
                // Retrieve text
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var sTag = document.createElement('script');
                        sTag.type = 'text/javascript';
                        sTag.innerHTML = this.responseText;
                        var head = document.getElementsByTagName('head')[0];
                        head.appendChild(sTag);
                    }
                }
                var url = 'https://raw.githubusercontent.com/chrischow/project-ace/main/rokr/components/' + filename + '.txt';
                xhr.open('GET', url, asynch);
                xhr.send();
            }

            // Load utils
            loadWords('jquery-3.2.1.min', false);
            loadWords('bootstrap-4.6.0.min', false);
            loadWords('jquery.dataTables-1.10.20.min', false);
            loadWords('dataTables.bootstrap4-1.10.20.min', false);
            loadWords('react.production.min', false);
            loadWords('react-dom.production.min', false);
            loadWords('babel-6.26.0.min', false);

            // Load components
            loadComponent('navbar');
        </script>
    </head>
    <body>
        <div id="root"></div>
        <script type="text/babel">
            // Cards
            function Card(props) {
                return (
                    <div className="col-6 col-lg-3 card--outer">
                        <div className="col-11 card--inner text-center">
                            <h4 className="card--header">{props.entityName}</h4>
                            Placeholder for progress ring/bar
                        </div>
                    </div>
                );
            }

            // HomeCards
            function HomeCards(props) {
                var cards = props.cardData.map(function(item) {
                    return (
                        <Card entityName={item.entityName} />
                    );
                });

                return (
                    <div className="row align-items-center mt-4 container">
                        {cards}
                    </div>
                );
            }

            // App
            function App() {
                return (
                    <div>
                        <Navbar links={links} />
                        <div className="container">
                            <h1 className="mt-4">
                                <span className="accent-blue">R</span><span className="accent-green">OKR</span>
                            </h1>
                            <h3 className="mt-4">Placeholder for overview of RAiD achievement</h3>
                            <h2 classname="mt-4">Teams</h2>
                            <HomeCards cardData={cardData} />
                        </div>
                    </div>
                )
            }

            // Data
            var links = [
                {link: 'Home', '#'},
                {link: 'HQ RAiD', '#'},
                {link: 'SWiFT', '#'},
                {link: 'RDO', '#'},
                {link: 'CyDef', '#'},
                {link: 'SES', '#'},
            ];

            var cardData = [
                {entityName: 'HQ RAiD'},
                {entityName: 'SWiFT'},
                {entityName: 'RDO'},
                {entityName: 'CyDef'},
                {entityName: 'SES'}
            ];

            // Render
            ReactDOM.render(
                <App />,
                document.getElementById('root')
            );
        </script>
    </body>
</html>