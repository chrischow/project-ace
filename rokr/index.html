<!DOCTYPE html>
<html>
    <head>
        <title>ROKR - RAiD OKR Management Platform</title>
        <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" type="text/css" href="styles.css">

        <!-- Load utils -->
        <script type="text/javascript">
            function loadWords(filename, asynch) {
                // Retrieve text
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var sTag = document.createElement('script');
                        sTag.type = 'text/javascript';
                        sTag.innerHTML = this.responseText;
                        var head = document.getElementsByTagName('head')[0];
                        head.appendChild(sTag);
                    }
                };
                var url = 'https://raw.githubusercontent.com/chrischow/project-ace/main/txt/' + filename + '.txt';
                xhr.open('GET', url, asynch);
                xhr.send();
            };

            function loadComponent(component) {
                // Retrieve text
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var sTag = document.createElement('script');
                        sTag.type = 'text/babel';
                        sTag.innerHTML = this.responseText;
                        var head = document.getElementsByTagName('head')[0];
                        head.appendChild(sTag);
                    }
                };
                var url = 'https://raw.githubusercontent.com/chrischow/project-ace/main/rokr/components/' + component + '.txt';
                
                xhr.open('GET', url, false);
                xhr.send();
            }

            // Load utils
            loadWords('jquery-3.2.1.min', false);
            loadWords('bootstrap-4.6.0.min', false);
            loadWords('jquery.dataTables-1.10.20.min', false);
            loadWords('dataTables.bootstrap4-1.10.20.min', false);
            loadWords('react.production.min', false);
            loadWords('react-dom.production.min', false);
            loadWords('react-router-dom.min', false);
            loadWords('babel-6.26.0.min', false);

            // Load components
            loadComponent('navbar');
            loadComponent('home');
        </script>
    </head>
    <body>
        <div id="root"></div>
        <script type="text/babel">
            // Branch page
            function Branch() {
                return (
                    <h1>Branch</h1>
                );
            }

            // Routing
            const BrowserRouter = ReactRouterDOM.BrowserRouter;
            const Route = ReactRouterDOM.Route;
            const Switch = ReactRouterDOM.Switch;

            // App
            function App() {
                return (
                    <BrowserRouter>
                        <Navbar links={teams} />
                        <div className="container">
                            <h1 className="mt-4">
                                <span className="accent-blue">R</span><span className="accent-green">OKR</span>
                            </h1>
                        </div>
                        <Route path='/' render={(props) => <Home cardData={teams} />} />
                        <Route path='/rdo' render={(props) => <Branch branchName="rdo" />} />

                    </BrowserRouter>
                )
            }

            // Data
            var teams = [
                {link: 'Home', url: '#'},
                {link: 'HQ RAiD', url: '#'},
                {link: 'SWiFT', url: '#'},
                {link: 'RDO', url: '#'},
                {link: 'CyDef', url: '#'},
                {link: 'SES', url: '#'},
            ];

            var teams = [
                {teamName: 'HQ RAiD', slug: 'hq-raid'},
                {teamName: 'SWiFT', slug: 'swift'},
                {teamName: 'RDO', slug: 'rdo'},
                {teamName: 'CyDef', slug: 'cydef'},
                {teamName: 'SES', slug: 'ses'}
            ];

            // Render
            ReactDOM.render(
                <App />,
                document.getElementById('root')
            );
        </script>
    </body>
</html>